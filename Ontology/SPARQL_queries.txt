# Retrieve Ingredients and Calories
PREFIX : <http://example.org/menu#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT ?ingredient ?calories 
WHERE {
    ?ingredient rdf:type :Ingredient ;
        :calories ?calories .
}

# Retrieve the Total Calories of a Meal
PREFIX : <http://example.org/menu#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT ?meal ?totalCalories 
WHERE {
    ?meal rdf:type :Meal ;
        :totalCalories ?totalCalories .
}

# Retrieve Calorie-Conscious Meals
PREFIX : <http://example.org/menu#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT ?meal ?totalCalories WHERE {
    ?meal rdf:type :Meal ;
        :totalCalories ?totalCalories .
  FILTER (?totalCalories <= 600)
}

# Retrieve Vegetarian Meals
PREFIX : <http://example.org/menu#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT DISTINCT ?meal WHERE {
  ?meal rdf:type :Meal .
  
  FILTER NOT EXISTS {
    ?meal :hasIngredient ?ingredient .
    ?ingredient :category ?category .
    FILTER (?category = :meat || ?category = :seafood)
  }
}


# Retrieve Lactose Free Meals
PREFIX : <http://example.org/menu#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT DISTINCT ?meal WHERE {
  ?meal rdf:type :Meal ;
  FILTER NOT EXISTS {
    ?meal :hasIngredient ?ingredient .
    ?ingredient :hasAllergen :lactose .
  }
}


# Retrieve Gluten Free Meals
PREFIX : <http://example.org/menu#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT DISTINCT ?meal WHERE {
  ?meal rdf:type :Meal ;
  FILTER NOT EXISTS {
    ?meal :hasIngredient ?ingredient .
    ?ingredient :hasAllergen :gluten_allergen .
  }
}

# Retrieve Calorie-Conscious and Vegetarian Meals
PREFIX : <http://example.org/menu#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT DISTINCT ?meal ?totalCalories WHERE {
  ?meal rdf:type :Meal ;
        :totalCalories ?totalCalories .
  
  FILTER (?totalCalories <= 400)

  FILTER NOT EXISTS {
    ?meal :hasIngredient ?ingredient .
    ?ingredient :category ?category .
    FILTER (?category = :meat || ?category = :seafood)
  }
}

# Retrieve Gluten and Lactose Free Meals
PREFIX : <http://example.org/menu#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT DISTINCT ?meal WHERE {
  ?meal rdf:type :Meal ;

  FILTER NOT EXISTS {
    ?meal :hasIngredient ?ingredient1 .
    ?ingredient1 :hasAllergen :gluten_allergen .
  }

  FILTER NOT EXISTS {
    ?meal :hasIngredient ?ingredient2 .
    ?ingredient2 :hasAllergen :lactose .
  }
}

# What ingredients does each dish have?
PREFIX : <http://example.org/menu#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT ?meal ?ingredient WHERE {
  ?meal rdf:type :Meal .
  ?meal :hasIngredient ?ingredient .
}

# Which dishes contain at least one “dairy” ingredient?
PREFIX : <http://example.org/menu#>

SELECT DISTINCT ?meal 
WHERE {
    ?meal :hasIngredient ?ingredient .
    ?ingredient :category ?category .
    FILTER (?category = "dairy")
}

PREFIX : <http://example.org/menu#>

SELECT DISTINCT ?meal ?all 
WHERE {
    ?meal :hasIngredient ?ingredient .
    ?ingredient :hasAllergen ?all .
}
